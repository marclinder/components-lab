/* ==========================================================================
   BUTTON MODULE â€” CSS NESTING VERSION
   Requires PostCSS or native browser support for nesting
========================================================================== */
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-family: inherit;
  cursor: pointer;

  gap: var(--space-8);
  border: var(--border-default);
  border-radius: var(--radius-lg);
  transition: var(--transition-bg);
  box-shadow: var(--shadow-button);
  font-weight: var(--font-weight-semibold);
  line-height: var(--font-size-20);

  /* === Locally scoped tokens for Base styles === */
  --color-bg: var(--color-brand);
  --color-border: var(--color-brand);
  --color-text: var(--color-text-inverse);
  /* hover state */
  --color-hover-bg: var(--color-brand-hover);
  --color-hover-border: var(--color-brand-hover);
  --color-hover-text: var(--color-text-inverse);
  /* disabled state */
  --color-disabled-bg: var(--color-brand-disabled);
  --color-disabled-border: var(--color-brand-disabled);
  --color-disabled-text: var(--color-text-inverse-disabled);

  /* === Base styles === */
  color: var(--color-text);
  background-color: var(--color-bg);
  border-color: var(--color-border);

  /* === Variants === */
  &.primary {
    /* no-op: uses default scoped tokens */
  }

  &.secondary {
    --color-bg: var(--color-bg-subtle);
    --color-text: var(--color-text-secondary);
    --color-border: var(--color-border);
    /* disabled state */
    --color-disabled-bg: var(--color-bg-disabled);
    --color-disabled-text: var(--color-text-disabled);
    --color-disabled-border: var(--color-border-disabled);
  }

  &.tertiary {
    --color-bg: transparent;
    --color-text: var(--color-brand);
    --color-border: var(--color-brand);
    /* disabled state */
    --color-disabled-bg: transparent;
    --color-disabled-text: var(--color-brand-disabled);
    --color-disabled-border: var(--color-brand-disabled);
  }

  &.link {
    --color-bg: transparent;
    --color-border: transparent;
    --color-text: var(--color-brand);
    /* hover state */
    --color-hover-text: var(--color-text-secondary);
    --color-hover-bg: transparent;
    --color-hover-border: transparent;
    /* disabled state */
    --color-disabled-bg: transparent;
    --color-disabled-border: transparent;
    --color-disabled-text: var(--color-brand-disabled);

    padding: 0;
    border-radius: var(--space-4);
    outline-offset: var(--space-4);
    box-shadow: none;

    &:hover:not(.disabled) {
      text-decoration: underline;
    }

    &.disabled {
      text-decoration: none;
    }
  }

  /* === Sizes === */
  &.sm {
    padding: var(--space-8) var(--space-14);
    font-size: var(--font-size-14);
  }

  &.md {
    padding: var(--space-10) var(--space-16);
    font-size: var(--font-size-16);
  }

  &.lg,
  &.xl {
    line-height: var(--font-size-24);
  }

  &.lg {
    padding: var(--space-10) var(--space-18);
    font-size: var(--font-size-16);
  }

  &.xl {
    padding: var(--space-12) var(--space-20);
    font-size: var(--font-size-16);
  }

  /* === Icon-Only === */
  &.iconOnly {
    aspect-ratio: 1 / 1;
    padding: 0;
  }
  &.sm.iconOnly {
    padding: var(--space-8);
  }
  &.md.iconOnly {
    padding: var(--space-10);
  }
  &.lg.iconOnly {
    padding: var(--space-12);
  }
  &.xl.iconOnly {
    padding: var(--space-14);
  }

  /* === States === */
  &:hover:not(.disabled) {
    background-color: var(--color-hover-bg);
    border-color: var(--color-hover-border);
    color: var(--color-hover-text);
  }

  &:focus-visible {
    outline: var(--space-4) solid var(--color-focus-ring);
    outline-offset: var(--font-size-1);
    box-shadow: var(--shadow-lg);
  }

  &.disabled {
    cursor: not-allowed;
    opacity: 0.7;
    background-color: var(--color-disabled-bg);
    color: var(--color-disabled-text);
    border-color: var(--color-disabled-border);
  }
}
